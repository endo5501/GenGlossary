# プロジェクト概要

**GenGlossary**は、AIを活用してドキュメントから用語集を自動生成するツールです。

## 目的

一般的にドキュメント、小説、資料などには多くの「用語」が使われており、それらの用語は文脈でのみ使われている意味を持つことがあります。このツールは、文章内の単語を抽出し、その文章内での意味を明らかにする用語集を作成することで、文章理解を補助します。

## 4ステップの処理フロー

```
1. 用語抽出 (TermExtractor)
   ↓ ドキュメント → 抽出された用語リスト

2. 用語集生成 (GlossaryGenerator)
   ↓ 用語リスト + ドキュメント → 暫定用語集

3. 精査 (GlossaryReviewer)
   ↓ 暫定用語集 → 問題点のリスト

4. 改善 (GlossaryRefiner)
   ↓ 問題点 + 暫定用語集 → 最終用語集
```

### ステップ1: 用語抽出

**目的**: ドキュメント内で使用されている重要な単語を抽出

**入力**: ドキュメント全文
**出力**: `["用語1", "用語2", "用語3", ...]`

### ステップ2: 用語集生成

**目的**: 暫定的な用語集を作成（依拠する文章の位置を明記）

**入力**: 用語リスト + ドキュメント
**出力**: Glossary（各用語に定義と出現箇所を含む）

### ステップ3: 精査

**目的**: 用語集を精査し、不明な点・矛盾している点を列挙

**入力**: 暫定用語集
**出力**: `List[GlossaryIssue]`（問題点のリスト）

### ステップ4: 改善

**目的**: 列挙された不明点・矛盾点を調査し、用語集をブラッシュアップ

**入力**: 問題点 + 暫定用語集 + ドキュメント
**出力**: 改善された最終用語集

## 具体例

### 入力ドキュメント例

```text
量子コンピュータは、量子力学の原理を利用して計算を行うコンピュータです。
従来のコンピュータが0と1のビットで情報を扱うのに対し、量子コンピュータは
量子ビット（キュービット）を使用します。キュービットは0と1の状態を
同時に保持する重ね合わせという性質を持ちます。

量子コンピュータの最大の特徴は、量子もつれという現象を利用した並列計算です。
これにより、特定の問題では従来のコンピュータを遥かに上回る計算速度を
実現できます。
```

### 出力用語集例

```markdown
# 用語集

## 量子コンピュータ
**定義**: 量子力学の原理を利用して計算を行うコンピュータ。量子ビット（キュービット）を
使用し、重ね合わせや量子もつれといった量子力学特有の現象を活用する。

**出現箇所**: 1行目、5行目

**関連用語**: 量子ビット、キュービット、重ね合わせ、量子もつれ

---

## 量子ビット（キュービット）
**定義**: 量子コンピュータで情報を扱う基本単位。従来のビット（0または1）と異なり、
0と1の状態を同時に保持する重ね合わせという性質を持つ。

**出現箇所**: 3行目

**関連用語**: 量子コンピュータ、重ね合わせ

---

## 重ね合わせ
**定義**: 量子ビットが0と1の状態を同時に保持できる量子力学の性質。

**出現箇所**: 4行目

**関連用語**: 量子ビット、キュービット

---

## 量子もつれ
**定義**: 複数の量子ビットが相互に関連し合う量子力学の現象。量子コンピュータの
並列計算能力の基盤となる。

**出現箇所**: 6行目

**関連用語**: 量子コンピュータ、量子ビット
```

## 技術スタック

### LLM
- **Ollama（ローカル実行）**: http://localhost:11434
- モデル: llama2, llama3.2, dengcao/Qwen3-30B-A3B-Instruct-2507 など

### 言語とツール
- **Python 3.11+**
- **パッケージ管理**: uv
- **テストフレームワーク**: pytest
- **静的解析**: pyright

### 主要ライブラリ
- **httpx**: Ollama API通信
- **pydantic**: データバリデーション、構造化出力
- **click**: CLI
- **rich**: ターミナル出力
- **pytest, respx**: テスト

## パッケージ管理（uv）

```bash
# 依存関係インストール
uv sync

# パッケージ追加
uv add <package-name>

# 開発依存関係追加
uv add --dev <package-name>

# Pythonスクリプト実行
uv run python <script.py>

# pytest実行
uv run pytest

# CLI実行
uv run genglossary --help
```

## データフロー

```
DocumentLoader → List[Document]
    ↓
TermExtractor (LLM) → List[str]
    ↓
GlossaryGenerator (LLM) → Glossary (provisional)
    ↓
GlossaryReviewer (LLM) → List[GlossaryIssue]
    ↓
GlossaryRefiner (LLM) → Glossary (refined)
    ↓
MarkdownWriter → output/glossary.md
```

## 関連ドキュメント

- [アーキテクチャ詳細](@.claude/rules/03-architecture.md) - ディレクトリ構成、モジュール設計
- [LLM統合パターン](@.claude/rules/04-llm-integration.md) - Ollama連携の詳細
- [プロジェクト仕様](/Users/endo5501/Work/GenGlossary/plan.md) - 詳細な設計書
